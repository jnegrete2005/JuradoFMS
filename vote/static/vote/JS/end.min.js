import{changeMode}from"./change_mode.js";import{Competitor}from"./classes.js";import{getWinner,reload}from"./util.js";document.getElementById("prev-end-btn").addEventListener("click",()=>{changeMode("end","deluxe")});export function fillTable(){let e;for(let t=1;t<=2;t++){const n=Competitor.unserialize(localStorage.getItem(`comp_${t}`));Array.from(document.getElementsByClassName(`comp-${t}-table`)).forEach((t,o)=>{o++,1!==o?(e=Object.keys(n)[o],t.innerHTML="replica"!==e?n.get_sum(e).toString():n.get_total().toString()):t.innerHTML=n.name})}const t=getWinner(Competitor.unserialize(localStorage.getItem("comp_1")),Competitor.unserialize(localStorage.getItem("comp_2")));document.getElementById("winner").innerHTML=t;const n=document.getElementById("end-btn");if("Réplica"===t)return n.innerHTML="Avanzar a réplica",void(n.dataset.isEnd="false");n.innerHTML="Terminar",n.dataset.isEnd="true"}document.getElementById("end-btn").addEventListener("click",()=>{"true"!==document.getElementById("end-btn").dataset.isEnd?(document.getElementById("poll-container").classList.remove("d-none"),document.getElementById("end-container").classList.add("d-none"),document.getElementById("rep-res-container").classList.add("d-none"),history.pushState({old_mode:"end",new_mode:"replica"},"","#replica"),changeMode(document.getElementById("mode").dataset.current_mode,"replica")):reload()});